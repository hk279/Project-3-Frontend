{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jerej\\\\Desktop\\\\R0314-MEAN\\\\project-3-frontend\\\\src\\\\components\\\\list.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Link } from \"react-router-dom\";\nimport \"../App.css\";\nimport Edit from \"./edit\";\nimport Alert from \"./alert\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimesCircle, faEdit } from \"@fortawesome/free-solid-svg-icons\";\n\nclass List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: this.props.data,\n      dataDeleted: false,\n      message: \"\",\n      status: \"\"\n    };\n    this.deleteData = this.deleteData.bind(this);\n  }\n\n  deleteData(id) {\n    //Workaround to make setState work inside fetch.\n    var that = this;\n    var url = \"http://localhost:5000/api/delete/\" + id;\n    fetch(url, {\n      method: \"DELETE\"\n    }).catch(err => {\n      console.log(err); //Sets the state in order to render the alert box.\n\n      that.setState({\n        dataDeleted: false,\n        message: \"Fetch error\",\n        status: \"error\"\n      });\n    }).then(() => {\n      //A function to remove the deleted entry from this component's state.\n      function filterFunction(entry) {\n        return entry._id !== id;\n      }\n\n      var newData = that.state.data.filter(filterFunction); //Sets the new, filtered data into the state and other state values in order to render the alert box.\n\n      that.setState({\n        data: newData,\n        dataDeleted: true,\n        message: \"Entry successfully deleted!\",\n        status: \"success\"\n      });\n      console.log(\"Data successfully deleted!\");\n    });\n  }\n\n  editData(data) {\n    ReactDOM.render( /*#__PURE__*/React.createElement(Edit, {\n      entry: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    }), document.getElementById(\"root\"));\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount\");\n    this.setState({\n      data: this.props.data\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props !== prevProps) {\n      console.log(\"componentDidUpdate\"); //Sets the state of dataDeleted to false in order to not show the alert box after updating the component.\n\n      this.setState({\n        data: this.props.data,\n        dataDeleted: false\n      });\n    }\n  }\n\n  render() {\n    /* Conditional rendering for the alert box. Shows the alert after an entry has been deleted. \r\n    Updating the component after the delete will make the alert disappear. */\n    var alert;\n\n    if (this.state.dataDeleted === true) {\n      alert = /*#__PURE__*/React.createElement(Alert, {\n        alertText: this.state.message,\n        status: this.state.status,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      });\n    } else if (this.state.dataDeleted === false && this.state.status === \"error\") {\n      alert = /*#__PURE__*/React.createElement(Alert, {\n        alertText: this.state.message,\n        status: this.state.status,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      });\n    } else {\n      alert = null;\n    }\n    /* Renders the table only if there are results with the search term.*/\n\n\n    if (this.state.data.length > 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"alert-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      }, alert), /*#__PURE__*/React.createElement(\"table\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 33\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 33\n        }\n      }, \"Platform\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 33\n        }\n      }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 33\n        }\n      }, \"Global Sales\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }, this.state.data.map((item, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 37\n        }\n      }, item.Name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 37\n        }\n      }, item.Platform), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 37\n        }\n      }, item.Year), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 37\n        }\n      }, item.Global_Sales), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"icon-button\",\n        onClick: () => {\n          this.deleteData(item._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        className: \"icon deleteIcon\",\n        icon: faTimesCircle,\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 45\n        }\n      }))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"icon-button\",\n        onClick: () => {\n          this.editData(item);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/edit/\" + item._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        className: \"icon editIcon\",\n        icon: faEdit,\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 49\n        }\n      })))))))));\n    } else {\n      return null;\n    }\n  }\n\n}\n\nexport default List;","map":{"version":3,"sources":["C:/Users/jerej/Desktop/R0314-MEAN/project-3-frontend/src/components/list.js"],"names":["React","ReactDOM","Link","Edit","Alert","FontAwesomeIcon","faTimesCircle","faEdit","List","Component","constructor","props","state","data","dataDeleted","message","status","deleteData","bind","id","that","url","fetch","method","catch","err","console","log","setState","then","filterFunction","entry","_id","newData","filter","editData","render","document","getElementById","componentDidMount","componentDidUpdate","prevProps","alert","length","map","item","i","Name","Platform","Year","Global_Sales"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../App.css\";\r\nimport Edit from \"./edit\";\r\nimport Alert from \"./alert\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle, faEdit } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nclass List extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: this.props.data,\r\n            dataDeleted: false,\r\n            message: \"\",\r\n            status: \"\",\r\n        };\r\n        this.deleteData = this.deleteData.bind(this);\r\n    }\r\n\r\n    deleteData(id) {\r\n        //Workaround to make setState work inside fetch.\r\n        var that = this;\r\n        var url = \"http://localhost:5000/api/delete/\" + id;\r\n\r\n        fetch(url, { method: \"DELETE\" })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                //Sets the state in order to render the alert box.\r\n                that.setState({ dataDeleted: false, message: \"Fetch error\", status: \"error\" });\r\n            })\r\n            .then(() => {\r\n                //A function to remove the deleted entry from this component's state.\r\n                function filterFunction(entry) {\r\n                    return entry._id !== id;\r\n                }\r\n\r\n                var newData = that.state.data.filter(filterFunction);\r\n\r\n                //Sets the new, filtered data into the state and other state values in order to render the alert box.\r\n                that.setState({\r\n                    data: newData,\r\n                    dataDeleted: true,\r\n                    message: \"Entry successfully deleted!\",\r\n                    status: \"success\",\r\n                });\r\n\r\n                console.log(\"Data successfully deleted!\");\r\n            });\r\n    }\r\n    editData(data) {\r\n        ReactDOM.render(<Edit entry={data}></Edit>, document.getElementById(\"root\"));\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(\"componentDidMount\");\r\n        this.setState({ data: this.props.data });\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props !== prevProps) {\r\n            console.log(\"componentDidUpdate\");\r\n            //Sets the state of dataDeleted to false in order to not show the alert box after updating the component.\r\n            this.setState({ data: this.props.data, dataDeleted: false });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        /* Conditional rendering for the alert box. Shows the alert after an entry has been deleted. \r\n        Updating the component after the delete will make the alert disappear. */\r\n        var alert;\r\n        if (this.state.dataDeleted === true) {\r\n            alert = <Alert alertText={this.state.message} status={this.state.status}></Alert>;\r\n        } else if (this.state.dataDeleted === false && this.state.status === \"error\") {\r\n            alert = <Alert alertText={this.state.message} status={this.state.status}></Alert>;\r\n        } else {\r\n            alert = null;\r\n        }\r\n\r\n        /* Renders the table only if there are results with the search term.*/\r\n        if (this.state.data.length > 0) {\r\n            return (\r\n                <div id=\"table\">\r\n                    <div className=\"alert-box\">{alert}</div>\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Name</th>\r\n                                <th>Platform</th>\r\n                                <th>Year</th>\r\n                                <th>Global Sales</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.state.data.map((item, i) => (\r\n                                <tr key={i}>\r\n                                    <td>{item.Name}</td>\r\n                                    <td>{item.Platform}</td>\r\n                                    <td>{item.Year}</td>\r\n                                    <td>{item.Global_Sales}</td>\r\n                                    <td>\r\n                                        <div\r\n                                            className=\"icon-button\"\r\n                                            onClick={() => {\r\n                                                this.deleteData(item._id);\r\n                                            }}\r\n                                        >\r\n                                            <FontAwesomeIcon\r\n                                                className=\"icon deleteIcon\"\r\n                                                icon={faTimesCircle}\r\n                                                size=\"lg\"\r\n                                            />\r\n                                        </div>\r\n                                    </td>\r\n                                    <td>\r\n                                        <div\r\n                                            className=\"icon-button\"\r\n                                            onClick={() => {\r\n                                                this.editData(item);\r\n                                            }}\r\n                                        >\r\n                                            <Link to={\"/edit/\" + item._id}>\r\n                                                <FontAwesomeIcon className=\"icon editIcon\" icon={faEdit} size=\"lg\" />\r\n                                            </Link>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport default List;\r\n"]},"metadata":{},"sourceType":"module"}